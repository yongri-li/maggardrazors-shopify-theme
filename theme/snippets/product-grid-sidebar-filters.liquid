{% assign tag_limit = filter_limit | times: 1 %}

{% comment %}
  Collection filters
{% endcomment %}
{% if collection.all_tags.size > 0 and filter_style != 'none' %}
  {% capture cat_array %}{%- render 'advanced-tag-loop' -%}{% endcapture %}
  {% assign cat_array = cat_array | split: '|' %}
  <div class="productgrid--sidebar-section" data-productgrid-filters-content>
    <h2 class="productgrid--sidebar-title">
      {{ 'product_grid.filters.title_count' | t: count: 0 }}
    </h2>
    <nav
      aria-label="Collection filters"
    >
      {% if current_tags.size > 0 %}
        <div class="productgrid--sidebar-item productgrid--sidebar-filters--current">
          {%- render 'product-grid-tags-active' -%}
        </div>
      {% endif %}

      {% if filter_style == 'groups' %}
        {%
          render 'product-grid-tag-groups',
          tag_limit: tag_limit,
          cat_array: cat_array,
        %}
      {% endif %}

      {% if filter_style == 'tags' %}
        {%
          render 'product-grid-tags',
          tag_limit: tag_limit,
          cat_array: cat_array,
        %}
      {% endif %}
    </nav>
  </div>
{% endif %}
